@model HandsOnTest1.Models.OrderForm

@{
    Layout = "_Layout";
    ViewData["Title"] = "Crazy Crank's T-Shirt Factory";
}

<div class="container mt-4">
    <h2 class="mb-2">Crazy Crank's T-Shirt Factory</h2>
    <p>Order Form</p>

    <form asp-action="Index" method="post">
        <div class="form-floating mb-3">
            <input asp-for="Quantity" class="form-control" placeholder="Quantity" />
            <label asp-for="Quantity">Quantity</label>
            <span asp-validation-for="Quantity" class="text-danger"></span>
        </div>

        <div class="form-floating mb-2">
            <input asp-for="DiscountCode" class="form-control" placeholder="Discount Code" />
            <label asp-for="DiscountCode">Discount Code</label>
        </div>

        @if (!string.IsNullOrEmpty(Model.DiscountMessage))
        {
            var isValidDiscount = Model.DiscountPercent > 0;
            <small class="@(isValidDiscount ? "text-success" : "text-danger")">@Model.DiscountMessage</small>
        }


        <button type="submit" class="btn btn-primary mt-3">Order</button>
    </form>


    @if (Model.Subtotal > 0)
    {
        <div class="mt-4">
            <textarea class="form-control" rows="7" readonly>
@{
    var priceDisplay = Model.DiscountPercent > 0 ? $"{Model.PricePerShirt:C}" : "$15.00";
    var receipt = $"{Model.Quantity} T-Shirts @ {priceDisplay} each\n" +
                  "---------------------------------\n" +
                  $"Subtotal: {Model.Subtotal:C}\n" +
                  $"Tax: {Model.Tax:C}\n" +
                  $"Total: {Model.Total:C}";
}
@receipt
        </textarea>
        </div>
    }

</div>
